(0,globalThis.parcelRequire6aa3.register)("1WeNH",function(e,t){/*! For license information please see bundle.js.LICENSE.txt */(()=>{var e={167:(e,t,r)=>{r.r(t),r.d(t,{BISHOP:()=>a,BLACK:()=>s,Chess:()=>M,DEFAULT_POSITION:()=>_,KING:()=>u,KNIGHT:()=>n,PAWN:()=>o,QUEEN:()=>l,ROOK:()=>h,SQUARES:()=>f,WHITE:()=>i,validateFen:()=>w});let i="w",s="b",o="p",n="n",a="b",h="r",l="q",u="k",_="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",c={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q"},f=["a8","b8","c8","d8","e8","f8","g8","h8","a7","b7","c7","d7","e7","f7","g7","h7","a6","b6","c6","d6","e6","f6","g6","h6","a5","b5","c5","d5","e5","f5","g5","h5","a4","b4","c4","d4","e4","f4","g4","h4","a3","b3","c3","d3","e3","f3","g3","h3","a2","b2","c2","d2","e2","f2","g2","h2","a1","b1","c1","d1","e1","f1","g1","h1"],p={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64},d={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},m={b:[16,32,17,15],w:[-16,-32,-17,-15]},g={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},b=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],v=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],k={p:1,n:2,b:4,r:8,q:16,k:32},E=[n,a,h,l],S={[u]:p.KSIDE_CASTLE,[l]:p.QSIDE_CASTLE},C={w:[{square:d.a1,flag:p.QSIDE_CASTLE},{square:d.h1,flag:p.KSIDE_CASTLE}],b:[{square:d.a8,flag:p.QSIDE_CASTLE},{square:d.h8,flag:p.KSIDE_CASTLE}]},I={b:1,w:6},y=["1-0","0-1","1/2-1/2","*"];function A(e){return -1!=="0123456789".indexOf(e)}function N(e){let t=15&e,r=e>>4;return"abcdefgh".substring(t,t+1)+"87654321".substring(r,r+1)}function T(e){return e===i?s:i}function w(e){let t=e.split(/\s+/);if(6!==t.length)return{ok:!1,error:"Invalid FEN: must contain six space-delimited fields"};let r=parseInt(t[5],10);if(isNaN(r)||r<=0)return{ok:!1,error:"Invalid FEN: move number must be a positive integer"};let i=parseInt(t[4],10);if(isNaN(i)||i<0)return{ok:!1,error:"Invalid FEN: half move counter number must be a non-negative integer"};if(!/^(-|[abcdefgh][36])$/.test(t[3]))return{ok:!1,error:"Invalid FEN: en-passant square is invalid"};if(/[^kKqQ-]/.test(t[2]))return{ok:!1,error:"Invalid FEN: castling availability is invalid"};if(!/^(w|b)$/.test(t[1]))return{ok:!1,error:"Invalid FEN: side-to-move is invalid"};let s=t[0].split("/");if(8!==s.length)return{ok:!1,error:"Invalid FEN: piece data does not contain 8 '/'-delimited rows"};for(let e=0;e<s.length;e++){let t=0,r=!1;for(let i=0;i<s[e].length;i++)if(A(s[e][i])){if(r)return{ok:!1,error:"Invalid FEN: piece data is invalid (consecutive number)"};t+=parseInt(s[e][i],10),r=!0}else{if(!/^[prnbqkPRNBQK]$/.test(s[e][i]))return{ok:!1,error:"Invalid FEN: piece data is invalid (invalid piece)"};t+=1,r=!1}if(8!==t)return{ok:!1,error:"Invalid FEN: piece data is invalid (too many squares in rank)"}}if("3"==t[3][1]&&"w"==t[1]||"6"==t[3][1]&&"b"==t[1])return{ok:!1,error:"Invalid FEN: illegal en-passant square"};for(let{color:e,regex:r}of[{color:"white",regex:/K/g},{color:"black",regex:/k/g}]){if(!r.test(t[0]))return{ok:!1,error:`Invalid FEN: missing ${e} king`};if((t[0].match(r)||[]).length>1)return{ok:!1,error:`Invalid FEN: too many ${e} kings`}}return Array.from(s[0]+s[7]).some(e=>"P"===e.toUpperCase())?{ok:!1,error:"Invalid FEN: some pawns are on the edge rows"}:{ok:!0}}function q(e,t,r,i,s,n,a=p.NORMAL){let h=i>>4;if(s!==o||7!==h&&0!==h)e.push({color:t,from:r,to:i,piece:s,captured:n,flags:a});else for(let o=0;o<E.length;o++){let h=E[o];e.push({color:t,from:r,to:i,piece:s,captured:n,promotion:h,flags:a|p.PROMOTION})}}function P(e){let t=e.charAt(0);if(t>="a"&&t<="h"){if(e.match(/[a-h]\d.*[a-h]\d/))return;return o}return"o"===(t=t.toLowerCase())?u:t}function R(e){return e.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}function L(e){return e.split(" ").slice(0,4).join(" ")}class M{_board=Array(128);_turn=i;_header={};_kings={w:-1,b:-1};_epSquare=-1;_halfMoves=0;_moveNumber=0;_history=[];_comments={};_castling={w:0,b:0};_positionCounts={};constructor(e=_){this.load(e)}clear({preserveHeaders:e=!1}={}){this._board=Array(128),this._kings={w:-1,b:-1},this._turn=i,this._castling={w:0,b:0},this._epSquare=-1,this._halfMoves=0,this._moveNumber=1,this._history=[],this._comments={},this._header=e?this._header:{},delete this._header.SetUp,delete this._header.FEN,this._positionCounts=new Proxy({},{get:(e,t)=>"length"===t?Object.keys(e).length:e?.[L(t)]||0,set:(e,t,r)=>{let i=L(t);return 0===r?delete e[i]:e[i]=r,!0}})}removeHeader(e){e in this._header&&delete this._header[e]}load(e,{skipValidation:t=!1,preserveHeaders:r=!1}={}){let o=e.split(/\s+/);if(o.length>=2&&o.length<6&&(e=o.concat(["-","-","0","1"].slice(-(6-o.length))).join(" ")),o=e.split(/\s+/),!t){let{ok:t,error:r}=w(e);if(!t)throw Error(r)}let n=o[0],a=0;this.clear({preserveHeaders:r});for(let e=0;e<n.length;e++){let t=n.charAt(e);if("/"===t)a+=8;else if(A(t))a+=parseInt(t,10);else{let e=t<"a"?i:s;this._put({type:t.toLowerCase(),color:e},N(a)),a++}}this._turn=o[1],o[2].indexOf("K")>-1&&(this._castling.w|=p.KSIDE_CASTLE),o[2].indexOf("Q")>-1&&(this._castling.w|=p.QSIDE_CASTLE),o[2].indexOf("k")>-1&&(this._castling.b|=p.KSIDE_CASTLE),o[2].indexOf("q")>-1&&(this._castling.b|=p.QSIDE_CASTLE),this._epSquare="-"===o[3]?-1:d[o[3]],this._halfMoves=parseInt(o[4],10),this._moveNumber=parseInt(o[5],10),this._updateSetup(e),this._positionCounts[e]++}fen(){let e=0,t="";for(let r=d.a8;r<=d.h1;r++){if(this._board[r]){e>0&&(t+=e,e=0);let{color:s,type:o}=this._board[r];t+=s===i?o.toUpperCase():o.toLowerCase()}else e++;r+1&136&&(e>0&&(t+=e),r!==d.h1&&(t+="/"),e=0,r+=8)}let r="";this._castling[i]&p.KSIDE_CASTLE&&(r+="K"),this._castling[i]&p.QSIDE_CASTLE&&(r+="Q"),this._castling[s]&p.KSIDE_CASTLE&&(r+="k"),this._castling[s]&p.QSIDE_CASTLE&&(r+="q"),r=r||"-";let n="-";if(-1!==this._epSquare){let e=this._epSquare+(this._turn===i?16:-16);for(let t of[e+1,e-1]){if(136&t)continue;let e=this._turn;if(this._board[t]?.color===e&&this._board[t]?.type===o){this._makeMove({color:e,from:t,to:this._epSquare,piece:o,captured:o,flags:p.EP_CAPTURE});let r=!this._isKingAttacked(e);if(this._undoMove(),r){n=N(this._epSquare);break}}}}return[t,this._turn,r,n,this._halfMoves,this._moveNumber].join(" ")}_updateSetup(e){this._history.length>0||(e!==_?(this._header.SetUp="1",this._header.FEN=e):(delete this._header.SetUp,delete this._header.FEN))}reset(){this.load(_)}get(e){return this._board[d[e]]||!1}put({type:e,color:t},r){return!!this._put({type:e,color:t},r)&&(this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),!0)}_put({type:e,color:t},r){if(-1==="pnbrqkPNBRQK".indexOf(e.toLowerCase())||!(r in d))return!1;let i=d[r];if(e==u&&-1!=this._kings[t]&&this._kings[t]!=i)return!1;let s=this._board[i];return s&&s.type===u&&(this._kings[s.color]=-1),this._board[i]={type:e,color:t},e===u&&(this._kings[t]=i),!0}remove(e){let t=this.get(e);return delete this._board[d[e]],t&&t.type===u&&(this._kings[t.color]=-1),this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),t}_updateCastlingRights(){let e=this._board[d.e1]?.type===u&&this._board[d.e1]?.color===i,t=this._board[d.e8]?.type===u&&this._board[d.e8]?.color===s;e&&this._board[d.a1]?.type===h&&this._board[d.a1]?.color===i||(this._castling.w&=~p.QSIDE_CASTLE),e&&this._board[d.h1]?.type===h&&this._board[d.h1]?.color===i||(this._castling.w&=~p.KSIDE_CASTLE),t&&this._board[d.a8]?.type===h&&this._board[d.a8]?.color===s||(this._castling.b&=~p.QSIDE_CASTLE),t&&this._board[d.h8]?.type===h&&this._board[d.h8]?.color===s||(this._castling.b&=~p.KSIDE_CASTLE)}_updateEnPassantSquare(){if(-1===this._epSquare)return;let e=this._epSquare+(this._turn===i?-16:16),t=this._epSquare+(this._turn===i?16:-16);null===this._board[e]&&null===this._board[this._epSquare]&&this._board[t]?.color===T(this._turn)&&this._board[t]?.type===o&&[t+1,t-1].some(e=>!(136&e)&&this._board[e]?.color===this._turn&&this._board[e]?.type===o)||(this._epSquare=-1)}_attacked(e,t){for(let r=d.a8;r<=d.h1;r++){if(136&r){r+=7;continue}if(void 0===this._board[r]||this._board[r].color!==e)continue;let n=this._board[r],a=r-t;if(0===a)continue;let h=a+119;if(b[h]&k[n.type]){if(n.type===o){if(a>0){if(n.color===i)return!0}else if(n.color===s)return!0;continue}if("n"===n.type||"k"===n.type)return!0;let e=v[h],l=r+e,u=!1;for(;l!==t;){if(null!=this._board[l]){u=!0;break}l+=e}if(!u)return!0}}return!1}_isKingAttacked(e){let t=this._kings[e];return -1!==t&&this._attacked(T(e),t)}isAttacked(e,t){return this._attacked(t,d[e])}isCheck(){return this._isKingAttacked(this._turn)}inCheck(){return this.isCheck()}isCheckmate(){return this.isCheck()&&0===this._moves().length}isStalemate(){return!this.isCheck()&&0===this._moves().length}isInsufficientMaterial(){let e={b:0,n:0,r:0,q:0,k:0,p:0},t=[],r=0,i=0;for(let s=d.a8;s<=d.h1;s++){if(i=(i+1)%2,136&s){s+=7;continue}let o=this._board[s];o&&(e[o.type]=o.type in e?e[o.type]+1:1,o.type===a&&t.push(i),r++)}if(2===r||3===r&&(1===e[a]||1===e[n]))return!0;if(r===e[a]+2){let e=0,r=t.length;for(let i=0;i<r;i++)e+=t[i];if(0===e||e===r)return!0}return!1}_getRepetitionCount(){return this._positionCounts[this.fen()]}isThreefoldRepetition(){return this._getRepetitionCount()>=3}isDraw(){return this._halfMoves>=100||this.isStalemate()||this.isInsufficientMaterial()||this.isThreefoldRepetition()}isGameOver(){return this.isCheckmate()||this.isStalemate()||this.isDraw()}moves({verbose:e=!1,square:t,piece:r}={}){let i=this._moves({square:t,piece:r});return e?i.map(e=>this._makePretty(e)):i.map(e=>this._moveToSan(e,i))}_moves({legal:e=!0,piece:t,square:r}={}){let i=r?r.toLowerCase():void 0,s=t?.toLowerCase(),a=[],h=this._turn,l=T(h),_=d.a8,c=d.h1,f=!1;if(i){if(!(i in d))return[];_=c=d[i],f=!0}for(let e=_;e<=c;e++){let t;if(136&e){e+=7;continue}if(!this._board[e]||this._board[e].color===l)continue;let{type:r}=this._board[e];if(r===o){if(s&&s!==r)continue;t=e+m[h][0],this._board[t]||(q(a,h,e,t,o),t=e+m[h][1],I[h]!==e>>4||this._board[t]||q(a,h,e,t,o,void 0,p.BIG_PAWN));for(let r=2;r<4;r++)136&(t=e+m[h][r])||(this._board[t]?.color===l?q(a,h,e,t,o,this._board[t].type,p.CAPTURE):t===this._epSquare&&q(a,h,e,t,o,o,p.EP_CAPTURE))}else{if(s&&s!==r)continue;for(let i=0,s=g[r].length;i<s;i++){let s=g[r][i];for(t=e;!(136&(t+=s));){if(this._board[t]){if(this._board[t].color===h)break;q(a,h,e,t,r,this._board[t].type,p.CAPTURE);break}if(q(a,h,e,t,r),r===n||r===u)break}}}}if(!(void 0!==s&&s!==u||f&&c!==this._kings[h])){if(this._castling[h]&p.KSIDE_CASTLE){let e=this._kings[h],t=e+2;this._board[e+1]||this._board[t]||this._attacked(l,this._kings[h])||this._attacked(l,e+1)||this._attacked(l,t)||q(a,h,this._kings[h],t,u,void 0,p.KSIDE_CASTLE)}if(this._castling[h]&p.QSIDE_CASTLE){let e=this._kings[h],t=e-2;this._board[e-1]||this._board[e-2]||this._board[e-3]||this._attacked(l,this._kings[h])||this._attacked(l,e-1)||this._attacked(l,t)||q(a,h,this._kings[h],t,u,void 0,p.QSIDE_CASTLE)}}if(!e||-1===this._kings[h])return a;let b=[];for(let e=0,t=a.length;e<t;e++)this._makeMove(a[e]),this._isKingAttacked(h)||b.push(a[e]),this._undoMove();return b}move(e,{strict:t=!1}={}){let r=null;if("string"==typeof e)r=this._moveFromSan(e,t);else if("object"==typeof e){let t=this._moves();for(let i=0,s=t.length;i<s;i++)if(e.from===N(t[i].from)&&e.to===N(t[i].to)&&(!("promotion"in t[i])||e.promotion===t[i].promotion)){r=t[i];break}}if(!r)throw"string"==typeof e?Error(`Invalid move: ${e}`):Error(`Invalid move: ${JSON.stringify(e)}`);let i=this._makePretty(r);return this._makeMove(r),this._positionCounts[i.after]++,i}_push(e){this._history.push({move:e,kings:{b:this._kings.b,w:this._kings.w},turn:this._turn,castling:{b:this._castling.b,w:this._castling.w},epSquare:this._epSquare,halfMoves:this._halfMoves,moveNumber:this._moveNumber})}_makeMove(e){let t=this._turn,r=T(t);if(this._push(e),this._board[e.to]=this._board[e.from],delete this._board[e.from],e.flags&p.EP_CAPTURE&&(this._turn===s?delete this._board[e.to-16]:delete this._board[e.to+16]),e.promotion&&(this._board[e.to]={type:e.promotion,color:t}),this._board[e.to].type===u){if(this._kings[t]=e.to,e.flags&p.KSIDE_CASTLE){let t=e.to-1,r=e.to+1;this._board[t]=this._board[r],delete this._board[r]}else if(e.flags&p.QSIDE_CASTLE){let t=e.to+1,r=e.to-2;this._board[t]=this._board[r],delete this._board[r]}this._castling[t]=0}if(this._castling[t]){for(let r=0,i=C[t].length;r<i;r++)if(e.from===C[t][r].square&&this._castling[t]&C[t][r].flag){this._castling[t]^=C[t][r].flag;break}}if(this._castling[r]){for(let t=0,i=C[r].length;t<i;t++)if(e.to===C[r][t].square&&this._castling[r]&C[r][t].flag){this._castling[r]^=C[r][t].flag;break}}e.flags&p.BIG_PAWN?this._epSquare=t===s?e.to-16:e.to+16:this._epSquare=-1,e.piece===o||e.flags&(p.CAPTURE|p.EP_CAPTURE)?this._halfMoves=0:this._halfMoves++,t===s&&this._moveNumber++,this._turn=r}undo(){let e=this._undoMove();if(e){let t=this._makePretty(e);return this._positionCounts[t.after]--,t}return null}_undoMove(){let e=this._history.pop();if(void 0===e)return null;let t=e.move;this._kings=e.kings,this._turn=e.turn,this._castling=e.castling,this._epSquare=e.epSquare,this._halfMoves=e.halfMoves,this._moveNumber=e.moveNumber;let r=this._turn,i=T(r);if(this._board[t.from]=this._board[t.to],this._board[t.from].type=t.piece,delete this._board[t.to],t.captured){if(t.flags&p.EP_CAPTURE){let e;e=r===s?t.to-16:t.to+16,this._board[e]={type:o,color:i}}else this._board[t.to]={type:t.captured,color:i}}if(t.flags&(p.KSIDE_CASTLE|p.QSIDE_CASTLE)){let e,r;t.flags&p.KSIDE_CASTLE?(e=t.to+1,r=t.to-1):(e=t.to-2,r=t.to+1),this._board[e]=this._board[r],delete this._board[r]}return t}pgn({newline:e="\n",maxWidth:t=0}={}){let r=[],i=!1;for(let t in this._header)r.push("["+t+' "'+this._header[t]+'"]'+e),i=!0;i&&this._history.length&&r.push(e);let s=e=>{let t=this._comments[this.fen()];return void 0!==t&&(e=`${e}${e.length>0?" ":""}{${t}}`),e},o=[];for(;this._history.length>0;)o.push(this._undoMove());let n=[],a="";for(0===o.length&&n.push(s(""));o.length>0;){a=s(a);let e=o.pop();if(!e)break;if(this._history.length||"b"!==e.color)"w"===e.color&&(a.length&&n.push(a),a=this._moveNumber+".");else{let e=`${this._moveNumber}. ...`;a=a?`${a} ${e}`:e}a=a+" "+this._moveToSan(e,this._moves({legal:!0})),this._makeMove(e)}if(a.length&&n.push(s(a)),void 0!==this._header.Result&&n.push(this._header.Result),0===t)return r.join("")+n.join(" ");let h=function(){return r.length>0&&" "===r[r.length-1]&&(r.pop(),!0)},l=0;for(let i=0;i<n.length;i++)l+n[i].length>t&&n[i].includes("{")?l=function(i,s){for(let o of s.split(" "))if(o){if(i+o.length>t){for(;h();)i--;r.push(e),i=0}r.push(o),i+=o.length,r.push(" "),i++}return h()&&i--,i}(l,n[i]):(l+n[i].length>t&&0!==i?(" "===r[r.length-1]&&r.pop(),r.push(e),l=0):0!==i&&(r.push(" "),l++),r.push(n[i]),l+=n[i].length);return r.join("")}header(...e){for(let t=0;t<e.length;t+=2)"string"==typeof e[t]&&"string"==typeof e[t+1]&&(this._header[e[t]]=e[t+1]);return this._header}loadPgn(e,{strict:t=!1,newlineChar:r="\r?\n"}={}){function i(e){return e.replace(/\\/g,"\\")}e=e.trim();let s=RegExp("^(\\[((?:"+i(r)+")|.)*\\])((?:\\s*"+i(r)+"){2}|(?:\\s*"+i(r)+")*$)").exec(e),o=s&&s.length>=2?s[1]:"";this.reset();let n=function(e){let t={},s=e.split(new RegExp(i(r))),o="",n="";for(let e=0;e<s.length;e++){let r=/^\s*\[\s*([A-Za-z]+)\s*"(.*)"\s*\]\s*$/;o=s[e].replace(r,"$1"),n=s[e].replace(r,"$2"),o.trim().length>0&&(t[o]=n)}return t}(o),a="";for(let e in n)"fen"===e.toLowerCase()&&(a=n[e]),this.header(e,n[e]);if(t){if("1"===n.SetUp){if(!("FEN"in n))throw Error("Invalid PGN: FEN tag must be supplied with SetUp tag");this.load(n.FEN,{preserveHeaders:!0})}}else a&&this.load(a,{preserveHeaders:!0});let h=function(e){return`{${Array.from((e=e.replace(RegExp(i(r),"g")," ")).slice(1,e.length-1)).map(function(e){return 128>e.charCodeAt(0)?e.charCodeAt(0).toString(16):encodeURIComponent(e).replace(/%/g,"").toLowerCase()}).join("")}}`},l=e.replace(o,"").replace(RegExp(`({[^}]*})+?|;([^${i(r)}]*)`,"g"),function(e,t,r){return void 0!==t?h(t):" "+h(`{${r.slice(1)}}`)}).replace(RegExp(i(r),"g")," "),u=/(\([^()]+\))+?/g;for(;u.test(l);)l=l.replace(u,"");let _=(l=(l=(l=l.replace(/\d+\.(\.\.)?/g,"")).replace(/\.\.\./g,"")).replace(/\$\d+/g,"")).trim().split(new RegExp(/\s+/));_=_.filter(e=>""!==e);let c="";for(let e=0;e<_.length;e++){let r=function(e){if(e.startsWith("{")&&e.endsWith("}")){var t;return 0==(t=e.slice(1,e.length-1)).length?"":decodeURIComponent("%"+(t.match(/.{1,2}/g)||[]).join("%"))}}(_[e]);if(void 0!==r){this._comments[this.fen()]=r;continue}let i=this._moveFromSan(_[e],t);if(null==i){if(!(y.indexOf(_[e])>-1))throw Error(`Invalid move in PGN: ${_[e]}`);c=_[e]}else c="",this._makeMove(i),this._positionCounts[this.fen()]++}c&&Object.keys(this._header).length&&!this._header.Result&&this.header("Result",c)}_moveToSan(e,t){let r="";if(e.flags&p.KSIDE_CASTLE)r="O-O";else if(e.flags&p.QSIDE_CASTLE)r="O-O-O";else{if(e.piece!==o){let i=function(e,t){let r=e.from,i=e.to,s=e.piece,o=0,n=0,a=0;for(let e=0,h=t.length;e<h;e++){let h=t[e].from,l=t[e].to;s===t[e].piece&&r!==h&&i===l&&(o++,r>>4==h>>4&&n++,(15&r)==(15&h)&&a++)}return o>0?n>0&&a>0?N(r):a>0?N(r).charAt(1):N(r).charAt(0):""}(e,t);r+=e.piece.toUpperCase()+i}e.flags&(p.CAPTURE|p.EP_CAPTURE)&&(e.piece===o&&(r+=N(e.from)[0]),r+="x"),r+=N(e.to),e.promotion&&(r+="="+e.promotion.toUpperCase())}return this._makeMove(e),this.isCheck()&&(this.isCheckmate()?r+="#":r+="+"),this._undoMove(),r}_moveFromSan(e,t=!1){let r=R(e),i,s,o,n,a,h=P(r),l=this._moves({legal:!0,piece:h});for(let e=0,t=l.length;e<t;e++)if(r===R(this._moveToSan(l[e],l)))return l[e];if(t)return null;let u=!1;if((s=r.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/))?(i=s[1],o=s[2],n=s[3],a=s[4],1==o.length&&(u=!0)):(s=r.match(/([pnbrqkPNBRQK])?([a-h]?[1-8]?)x?-?([a-h][1-8])([qrbnQRBN])?/))&&(i=s[1],o=s[2],n=s[3],a=s[4],1==o.length&&(u=!0)),h=P(r),l=this._moves({legal:!0,piece:i||h}),!n)return null;for(let e=0,t=l.length;e<t;e++)if(o){if(!(i&&i.toLowerCase()!=l[e].piece||d[o]!=l[e].from||d[n]!=l[e].to||a&&a.toLowerCase()!=l[e].promotion))return l[e];if(u){let t=N(l[e].from);if(!(i&&i.toLowerCase()!=l[e].piece||d[n]!=l[e].to||o!=t[0]&&o!=t[1]||a&&a.toLowerCase()!=l[e].promotion))return l[e]}}else if(r===R(this._moveToSan(l[e],l)).replace("x",""))return l[e];return null}ascii(){let e="   +------------------------+\n";for(let t=d.a8;t<=d.h1;t++){if(0==(15&t)&&(e+=" "+"87654321"[t>>4]+" |"),this._board[t]){let r=this._board[t].type;e+=" "+(this._board[t].color===i?r.toUpperCase():r.toLowerCase())+" "}else e+=" . ";t+1&136&&(e+="|\n",t+=8)}return e+"   +------------------------+\n     a  b  c  d  e  f  g  h"}perft(e){let t=this._moves({legal:!1}),r=0,i=this._turn;for(let s=0,o=t.length;s<o;s++)this._makeMove(t[s]),this._isKingAttacked(i)||(e-1>0?r+=this.perft(e-1):r++),this._undoMove();return r}_makePretty(e){let{color:t,piece:r,from:i,to:s,flags:o,captured:n,promotion:a}=e,h="";for(let e in p)p[e]&o&&(h+=c[e]);let l=N(i),u=N(s),_={color:t,piece:r,from:l,to:u,san:this._moveToSan(e,this._moves({legal:!0})),flags:h,lan:l+u,before:this.fen(),after:""};return this._makeMove(e),_.after=this.fen(),this._undoMove(),n&&(_.captured=n),a&&(_.promotion=a,_.lan+=a),_}turn(){return this._turn}board(){let e=[],t=[];for(let r=d.a8;r<=d.h1;r++)null==this._board[r]?t.push(null):t.push({square:N(r),type:this._board[r].type,color:this._board[r].color}),r+1&136&&(e.push(t),t=[],r+=8);return e}squareColor(e){if(e in d){let t=d[e];return((t>>4)+(15&t))%2==0?"light":"dark"}return null}history({verbose:e=!1}={}){let t=[],r=[];for(;this._history.length>0;)t.push(this._undoMove());for(;;){let i=t.pop();if(!i)break;e?r.push(this._makePretty(i)):r.push(this._moveToSan(i,this._moves())),this._makeMove(i)}return r}_pruneComments(){let e=[],t={},r=e=>{e in this._comments&&(t[e]=this._comments[e])};for(;this._history.length>0;)e.push(this._undoMove());for(r(this.fen());;){let t=e.pop();if(!t)break;this._makeMove(t),r(this.fen())}this._comments=t}getComment(){return this._comments[this.fen()]}setComment(e){this._comments[this.fen()]=e.replace("{","[").replace("}","]")}deleteComment(){let e=this._comments[this.fen()];return delete this._comments[this.fen()],e}getComments(){return this._pruneComments(),Object.keys(this._comments).map(e=>({fen:e,comment:this._comments[e]}))}deleteComments(){return this._pruneComments(),Object.keys(this._comments).map(e=>{let t=this._comments[e];return delete this._comments[e],{fen:e,comment:t}})}setCastlingRights(e,t){for(let r of[u,l])void 0!==t[r]&&(t[r]?this._castling[e]|=S[r]:this._castling[e]&=~S[r]);this._updateCastlingRights();let r=this.getCastlingRights(e);return!(void 0!==t[u]&&t[u]!==r[u]||void 0!==t[l]&&t[l]!==r[l])}getCastlingRights(e){return{[u]:0!=(this._castling[e]&S[u]),[l]:0!=(this._castling[e]&S[l])}}moveNumber(){return this._moveNumber}}}},t={};function r(i){var s=t[i];if(void 0!==s)return s.exports;var o=t[i]={exports:{}};return e[i](o,o.exports,r),o.exports}r.d=(e,t)=>{for(var i in t)r.o(t,i)&&!r.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{let{Chess:e}=r(167);var t=null,i=($("#myBoard"),new e),s=$("#status"),o=$("#fen"),n=$("#pgn");function a(){$("#myBoard .square-55d63").css("background","")}function h(e){var t=$("#myBoard .square-"+e),r="#a9a9a9";t.hasClass("black-3c85d")&&(r="#696969"),t.css("background",r)}function l(){var e="",t="White";"b"===i.turn()&&(t="Black"),i.isCheckmate()?e="Game over, "+t+" is in checkmate.":i.isDraw()?e="Game over, drawn position":(e=t+" to move",i.isCheck()&&(e+=", "+t+" is in check")),s.html(e),o.html(i.fen()),n.html(i.pgn())}t=Chessboard("myBoard",{draggable:!0,position:"start",onDragStart:function(e,t){return!i.isGameOver()&&!("w"===i.turn()&&-1!==t.search(/^b/)||"b"===i.turn()&&-1!==t.search(/^w/))&&void 0},onDrop:function(e,r){a();try{i.move({from:e,to:r,promotion:"q"})}catch(e){return"snapback"}(function(e){if(i.isCheckmate())$("#status").html(`<b>Checkmate!</b> Oops, <b>${e}</b> lost.`);else if(i.isInsufficientMaterial())$("#status").html("It's a <b>draw!</b> (Insufficient Material)");else if(i.isThreefoldRepetition())$("#status").html("It's a <b>draw!</b> (Threefold Repetition)");else if(i.isStalemate())$("#status").html("It's a <b>draw!</b> (Stalemate)");else{if(!i.isDraw())return i.isCheck()?$("#status").html(`Oops, <b>${e}</b> is in <b>check!</b>`):$("#status").html("No check, checkmate, or draw."),!1;$("#status").html("It's a <b>draw!</b> (50-move Rule)")}return!0})("black")||window.setTimeout(function(){!function(e){let r;let s={from:(r=function(e,t,r){let i;i="b"===t?parseInt($("#search-depth").find(":selected").text()):parseInt($("#search-depth-white").find(":selected").text()),(new Date).getTime();var[s,o]=function e(t,r,i,s,o,n,a){var h,l=t.moves({verbose:!0});if(l.sort(function(e,t){return .5-Math.random()}),0===r||0===l.length)return[null,n];for(var _,c=Number.NEGATIVE_INFINITY,d=Number.POSITIVE_INFINITY,m=0;m<l.length;m++){h=l[m];var g=t.move(h),[b,v]=e(t,r-1,i,s,!o,function(e,t,r){var i=[8-parseInt(e.from[1]),e.from.charCodeAt(0)-97],s=[8-parseInt(e.to[1]),e.to.charCodeAt(0)-97];return t<-1500&&("k"===e.piece?e.piece="k_e":"k"===e.captured&&(e.captured="k_e")),"captured"in e&&(e.color===r?t+=u[e.captured]+f[e.color][e.captured][s[0]][s[1]]:t-=u[e.captured]+p[e.color][e.captured][s[0]][s[1]]),e.flags.includes("p")?(e.promotion="q",e.color===r?(t-=u[e.piece]+p[e.color][e.piece][i[0]][i[1]],t+=u[e.promotion]+p[e.color][e.promotion][s[0]][s[1]]):(t+=u[e.piece]+p[e.color][e.piece][i[0]][i[1]],t-=u[e.promotion]+p[e.color][e.promotion][s[0]][s[1]])):e.color!==r?(t+=p[e.color][e.piece][i[0]][i[1]],t-=p[e.color][e.piece][s[0]][s[1]]):(t-=p[e.color][e.piece][i[0]][i[1]],t+=p[e.color][e.piece][s[0]][s[1]]),t}(g,n,a),a);if(t.undo(),o?(v>c&&(c=v,_=g),v>i&&(i=v)):(v<d&&(d=v,_=g),v<s&&(s=v)),i>=s)break}return o?[_,c]:[_,d]}(e,i,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,!0,0,t);return[s,o]}(i,"b",0)[0]).from,to:r.to,promotion:"q"};i.move(s),t.position(i.fen()),l()}()},250),l()},onMouseoutSquare:function(e,t){a()},onMouseoverSquare:function(e,t){var r=i.moves({square:e,verbose:!0});if(0!==r.length){h(e);for(var s=0;s<r.length;s++)h(r[s].to)}},onSnapEnd:function(){t.position(i.fen())}}),l();var u={p:100,n:280,b:320,r:479,q:929,k:6e4,k_e:6e4},_={p:[[100,100,100,100,105,100,100,100],[78,83,86,73,102,82,85,90],[7,29,21,44,40,31,44,7],[-17,16,-2,15,14,0,15,-13],[-26,3,10,9,6,1,0,-23],[-22,9,5,-11,-10,-2,3,-19],[-31,8,-7,-37,-36,-14,3,-31],[0,0,0,0,0,0,0,0]],n:[[-66,-53,-75,-75,-10,-55,-58,-70],[-3,-6,100,-36,4,62,-4,-14],[10,67,1,74,73,27,62,-2],[24,24,45,37,33,41,25,17],[-1,5,31,21,22,35,2,0],[-18,10,13,22,18,15,11,-14],[-23,-15,2,0,2,0,-23,-20],[-74,-23,-26,-24,-19,-35,-22,-69]],b:[[-59,-78,-82,-76,-23,-107,-37,-50],[-11,20,35,-42,-39,31,2,-22],[-9,39,-32,41,52,-10,28,-14],[25,17,20,34,26,25,15,10],[13,10,17,23,17,16,0,7],[14,25,24,15,8,25,20,15],[19,20,11,6,7,6,20,16],[-7,2,-15,-12,-14,-15,-10,-10]],r:[[35,29,33,4,37,33,56,50],[55,29,56,67,55,62,34,60],[19,35,28,33,45,27,25,15],[0,5,16,13,18,-4,-9,-6],[-28,-35,-16,-21,-13,-29,-46,-30],[-42,-28,-42,-25,-25,-35,-26,-46],[-53,-38,-31,-26,-29,-43,-44,-53],[-30,-24,-18,5,-2,-18,-31,-32]],q:[[6,1,-8,-104,69,24,88,26],[14,32,60,-10,20,76,57,24],[-2,43,32,60,72,63,43,2],[1,-16,22,17,25,20,-13,-6],[-14,-15,-2,-5,-1,-10,-20,-22],[-30,-6,-13,-11,-16,-11,-16,-27],[-36,-18,0,-19,-15,-15,-21,-38],[-39,-30,-31,-13,-31,-36,-34,-42]],k:[[4,54,47,-99,-99,60,83,-62],[-32,10,55,56,56,55,10,3],[-62,12,-57,44,-67,28,37,-31],[-55,50,11,-4,-19,13,0,-49],[-55,-43,-52,-28,-51,-47,-8,-50],[-47,-42,-43,-79,-64,-32,-29,-32],[-4,3,-14,-50,-57,-18,13,4],[17,30,-3,-14,6,-1,40,18]],k_e:[[-50,-40,-30,-20,-20,-30,-40,-50],[-30,-20,-10,0,0,-10,-20,-30],[-30,-10,20,30,30,20,-10,-30],[-30,-10,30,40,40,30,-10,-30],[-30,-10,30,40,40,30,-10,-30],[-30,-10,20,30,30,20,-10,-30],[-30,-30,0,0,0,0,-30,-30],[-50,-30,-30,-30,-30,-30,-30,-50]]},c={p:_.p.slice().reverse(),n:_.n.slice().reverse(),b:_.b.slice().reverse(),r:_.r.slice().reverse(),q:_.q.slice().reverse(),k:_.k.slice().reverse(),k_e:_.k_e.slice().reverse()},f={w:c,b:_},p={w:_,b:c}})()})()});
//# sourceMappingURL=bundle.c0b4fc9e.js.map
